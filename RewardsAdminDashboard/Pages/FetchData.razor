@page "/fetchdata"
@using RewardsAdminDashboard.Data
@inject IJSRuntime JS
<PageTitle>Symmetric Rewards Dashboard</PageTitle>

<h1>Symmetric Rewards Dashboard</h1>

Welcome to the Symmetric Rewards dashboard, a place to view rewards generated by the rewards daemon as well as to generate reward payment files.

<SurveyPrompt Title="How is this service working for you?" />

<TelerikGrid Data=@Rewards
             ConfirmDelete="true"
             Pageable="true"
             Groupable="true"
             Sortable="true"
             FilterMode="GridFilterMode.FilterMenu"
             Resizable="true"
             Reorderable="true"
             EditMode="GridEditMode.Popup"
             SelectionMode="GridSelectionMode.Multiple"
             PageSize="10"
             Navigable="true">
<GridColumns>
        <GridCheckboxColumn></GridCheckboxColumn>
        <GridColumn Field="@nameof(RewardsDto.Id)" Title="RecordId" Width="195px" />
        <GridColumn Field="@nameof(RewardsDto.RewardDate)" Title="Date & Time" Width="195px" />
        <GridColumn Field="@nameof(RewardsDto.ChainId)" Title="ChainId" Width="195px" />
        <GridColumn Field="@nameof(RewardsDto.Address)" Title="Wallet Address" Width="195px" />
        <GridColumn Field="@nameof(RewardsDto.Amount)" Width="120px" Title="Reward" TextAlign="@ColumnTextAlign.Right">
            <Template>
                    @((context as RewardsDto).Amount)
            </Template>
        </GridColumn>
    </GridColumns>
</TelerikGrid>

<div style="padding-top:50px;"></div>
<div class="col-12">
        <h4>Payment file generator</h4>
        <p>
            Highlight the period to generate a reward payment file for.
        </p>
        <div class="k-d-flex k-flex-wrap">
            <TelerikCalendar Views="2"
                             @bind-RangeStart="@rangeStart"
                             @bind-RangeEnd="@rangeEnd"
                             SelectionMode="@CalendarSelectionMode.Range">
            </TelerikCalendar>
            <div class="p-sm">
                <h6 class="kd-demo-heading mt-sm">Selected Range</h6>
                <div><strong>Range Start: </strong>@rangeStart.ToString("dd MMM yyyy")</div>
                <div><strong>Range End: </strong>@rangeEnd.ToString("dd MMM yyyy")</div>
            </div>
        </div>
    </div>

    <button @onclick="DownloadCSVFromStreamCelo">
        Generate Celo CSV Payment File
    </button>

    <button @onclick="DownloadJSONFromStreamCelo">
        Generate Celo JSON Payment File
    </button>

    <div style="clear:both;"></div>
    <button @onclick="DownloadCSVFromStreamGnosis">
        Generate Gnosis CSV Payment File
    </button>

    <button @onclick="DownloadJSONFromStreamGnosis">
        Generate Gnosis JSON Payment File
    </button>